api:
  enabled: true

sources:
  in:
    # if you wanna get from files
    type: file
    include:
      - /tmp/logs/*.log
    line_delimiter: "\n"
    max_line_bytes: 102400
    max_read_bytes: 2048
    read_from: beginning

#  used to add tags to log
transforms:
  dd_transform:
    type: remap
    inputs:
      - in
    source: |-
      .ddtags = "env:$DD_ENV,version:$DD_VERSION"
      .service = "$DD_SERVICE"

sinks:
  out:
    inputs:
      - "in"
    type: "console"
    encoding:
      codec: "text"
  # test DD sink
  #sink_dd:
  #  type: datadog_logs
  #  inputs:
  #    - "dd_transform"
  #  compression: gzip
  #  site: us3.datadoghq.com
  #  default_api_key: "$DD_API_KEY"
  openobserve:
    type: "http"
    inputs:
      - "dd_transform"
    uri: "http://local-openobserve:5080/api/default/default/_json"
    method: "post"
    auth:
      strategy: "basic"
      user: "root@example.com"
      password: "w5pIInolPjFVa7y9"
    compression: "gzip"
    encoding:
      codec: "json"
      timestamp_format: "rfc3339"
    healthcheck:
      enabled: false
